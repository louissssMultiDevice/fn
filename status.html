<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="https://files.catbox.moe/pvnz0v.jpg">
    <title>Forexter Network - Advanced Server Monitoring</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #6c5ce7;
            --primary-dark: #5649c0;
            --primary-light: #8b7cea;
            --secondary: #00cec9;
            --secondary-dark: #00a8a8;
            --dark: #121212;
            --dark-light: #1e1e2d;
            --darker: #0a0a0a;
            --text: #eaeaea;
            --text-secondary: #b0b0b0;
            --success: #00b894;
            --danger: #e84393;
            --warning: #fdcb6e;
            --info: #74b9ff;
            --glow: 0 0 20px rgba(108, 92, 231, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--darker) 0%, var(--dark) 50%, var(--dark-light) 100%);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 10% 20%, rgba(108, 92, 231, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(0, 206, 201, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 50% 50%, rgba(253, 203, 110, 0.05) 0%, transparent 50%);
            z-index: -1;
        }

        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .particle {
            position: absolute;
            background: var(--primary-light);
            border-radius: 50%;
            opacity: 0.3;
            animation: float 15s infinite linear;
        }

        @keyframes float {
            0% { transform: translateY(0) translateX(0) rotate(0deg); }
            33% { transform: translateY(-30px) translateX(20px) rotate(120deg); }
            66% { transform: translateY(20px) translateX(-10px) rotate(240deg); }
            100% { transform: translateY(0) translateX(0) rotate(360deg); }
        }

        .panel-container {
            width: 100%;
            max-width: 1200px;
            background: rgba(30, 30, 45, 0.7);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            position: relative;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Banner Section */
        .banner {
            height: 220px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiPjxkZWZzPjxwYXR0ZXJuIGlkPSJwYXR0ZXJuIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHBhdHRlcm5Vbml0cz0idXNlclNwYWNlT25Vc2UiIHBhdHRlcm5UcmFuc2Zvcm09InJvdGF0ZSg0NSkiPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0icmdiYSgyNTUsMjU1LDI1NSwwLjA1KSIvPjwvcGF0dGVybj48L2RlZnM+PHJlY3QgZmlsbD0idXJsKCNwYXR0ZXJuKSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIvPjwvc3ZnPg==');
        }

        .banner-content {
            position: relative;
            z-index: 1;
            text-align: center;
            color: white;
            padding: 0 20px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .server-logo {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            background: white;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s, box-shadow 0.3s;
            animation: pulse 2s infinite;
        }

        .server-logo:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
        }

        @keyframes pulse {
            0% { box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3); }
            50% { box-shadow: 0 8px 25px rgba(108, 92, 231, 0.5); }
            100% { box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3); }
        }

        .server-logo i {
            font-size: 45px;
            color: var(--primary);
        }

        .banner h1 {
            font-size: 32px;
            margin-bottom: 5px;
            font-weight: 700;
            letter-spacing: 1px;
        }

        .banner p {
            font-size: 16px;
            opacity: 0.9;
        }

        /* Main Content */
        .main-content {
            padding: 30px;
        }

        /* Status Header */
        .status-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.08);
            padding: 20px;
            border-radius: 15px;
            border-left: 5px solid var(--primary);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }

        .status-header:hover {
            transform: translateY(-3px);
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .status-dot {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: gray;
            position: relative;
            box-shadow: 0 0 0 rgba(128, 128, 128, 0.7);
        }

        .status-dot.online {
            background: var(--success);
            box-shadow: 0 0 15px var(--success);
            animation: pulse-dot 2s infinite;
        }

        .status-dot.offline {
            background: var(--danger);
            box-shadow: 0 0 15px var(--danger);
        }

        .status-dot.checking {
            background: var(--warning);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse-dot {
            0% { box-shadow: 0 0 0 0 rgba(0, 184, 148, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(0, 184, 148, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 184, 148, 0); }
        }

        .status-text {
            font-size: 20px;
            font-weight: 600;
        }

        .last-updated {
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 25px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            transition: transform 0.3s, background 0.3s, box-shadow 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-8px);
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .stat-card:hover::before {
            transform: scaleX(1);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(108, 92, 231, 0.4);
            transition: transform 0.3s;
        }

        .stat-card:hover .stat-icon {
            transform: scale(1.1) rotate(5deg);
        }

        .stat-icon i {
            font-size: 24px;
            color: white;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
            background: linear-gradient(to right, var(--text), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-label {
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* Players Section */
        .players-section {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .players-section:hover {
            transform: translateY(-3px);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .section-title i {
            color: var(--secondary);
            font-size: 22px;
        }

        .player-count {
            font-size: 14px;
            color: var(--text-secondary);
            background: rgba(0, 0, 0, 0.2);
            padding: 5px 12px;
            border-radius: 20px;
        }

        .player-list {
            max-height: 250px;
            overflow-y: auto;
            padding-right: 10px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
        }

        .player-list::-webkit-scrollbar {
            width: 8px;
        }

        .player-list::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .player-list::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 10px;
        }

        .player-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            transition: all 0.3s ease;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .player-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .player-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }

        .player-avatar {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #1e1e2d, #2d2d42);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            border: 2px solid var(--primary);
        }

        .player-avatar.minecraft-avatar {
            background: transparent;
            border: 3px solid #8B7355;
            position: relative;
        }

        .player-avatar.minecraft-avatar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(45deg, transparent 30%, rgba(139, 115, 85, 0.3) 50%, transparent 70%),
                repeating-linear-gradient(45deg, 
                    #8B7355 0px, #8B7355 2px,
                    #A68A5B 2px, #A68A5B 4px,
                    #8B7355 4px, #8B7355 6px);
            border-radius: 8px;
        }

        .avatar-icon {
            font-size: 32px;
            color: #F0E68C;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            z-index: 1;
        }

        .avatar-icon.grass {
            color: #7CFC00;
        }

        .avatar-icon.diamond {
            color: #4EE2EC;
        }

        .avatar-icon.redstone {
            color: #FF5555;
        }

        .avatar-icon.emerald {
            color: #00FF7F;
        }

        .avatar-icon.gold {
            color: #FFD700;
        }

        .avatar-icon.iron {
            color: #C0C0C0;
        }

        .player-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text);
            margin-top: 5px;
            max-width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .player-ping {
            font-size: 11px;
            color: var(--text-secondary);
            margin-top: 3px;
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 10px;
        }

        .no-players {
            text-align: center;
            padding: 30px;
            color: var(--text-secondary);
            font-style: italic;
            grid-column: 1 / -1;
        }

        /* Server Info */
        .server-info {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .server-info:hover {
            transform: translateY(-3px);
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
        }

        .info-item {
            display: flex;
            flex-direction: column;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            transition: background 0.3s;
            border-left: 3px solid var(--primary);
        }

        .info-item:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .info-label {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .info-value {
            font-size: 16px;
            font-weight: 500;
        }

        /* Footer */
        .footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 30px;
            background: rgba(0, 0, 0, 0.3);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 14px;
            color: var(--text-secondary);
        }

        .refresh-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .refresh-btn {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
            box-shadow: 0 4px 10px rgba(108, 92, 231, 0.3);
        }

        .refresh-btn:hover {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(108, 92, 231, 0.4);
        }

        .refresh-btn:active {
            transform: translateY(0);
        }

        .refresh-btn:disabled {
            background: var(--text-secondary);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .refresh-btn.loading {
            position: relative;
            color: transparent;
        }

        .refresh-btn.loading::after {
            content: '';
            position: absolute;
            width: 18px;
            height: 18px;
            border: 2px solid transparent;
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Favicon */
        .favicon-container {
            text-align: center;
            margin: 20px 0;
        }

        .server-favicon {
            width: 80px;
            height: 80px;
            border-radius: 12px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s;
        }

        .server-favicon:hover {
            transform: scale(1.05);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .status-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }
            .footer {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            .banner h1 {
                font-size: 26px;
            }
            .server-logo {
                width: 70px;
                height: 70px;
            }
            .server-logo i {
                font-size: 35px;
            }
            .player-list {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }
        }

        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            .banner h1 {
                font-size: 22px;
            }
            .main-content {
                padding: 20px;
            }
            .player-list {
                grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
            }
        }

        /* Notification System */
        .notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 350px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .notification {
            background: rgba(30, 30, 45, 0.95);
            border-radius: 12px;
            padding: 15px 20px;
            color: white;
            font-weight: 500;
            transform: translateX(400px);
            transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: flex-start;
            gap: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            border-left: 5px solid var(--success);
        }

        .notification.error {
            border-left: 5px solid var(--danger);
        }

        .notification.warning {
            border-left: 5px solid var(--warning);
        }

        .notification.info {
            border-left: 5px solid var(--info);
        }

        .notification::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 5px;
            background: inherit;
        }

        .notification-icon {
            font-size: 20px;
            margin-top: 2px;
            flex-shrink: 0;
        }

        .notification.success .notification-icon {
            color: var(--success);
        }

        .notification.error .notification-icon {
            color: var(--danger);
        }

        .notification.warning .notification-icon {
            color: var(--warning);
        }

        .notification.info .notification-icon {
            color: var(--info);
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 15px;
        }

        .notification-message {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        .notification-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 14px;
            padding: 0;
            flex-shrink: 0;
            transition: color 0.2s;
        }

        .notification-close:hover {
            color: var(--text);
        }

        .notification-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: rgba(255, 255, 255, 0.1);
            overflow: hidden;
        }

        .notification-progress-bar {
            height: 100%;
            width: 100%;
            transform-origin: left;
            animation: progress 5s linear forwards;
        }

        .notification.success .notification-progress-bar {
            background: var(--success);
        }

        .notification.error .notification-progress-bar {
            background: var(--danger);
        }

        .notification.warning .notification-progress-bar {
            background: var(--warning);
        }

        .notification.info .notification-progress-bar {
            background: var(--info);
        }

        @keyframes progress {
            0% { transform: scaleX(1); }
            100% { transform: scaleX(0); }
        }

        /* Tabs */
        .tabs {
            display: flex;
            margin-bottom: 25px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 5px;
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            text-align: center;
            padding: 12px;
            cursor: pointer;
            border-radius: 10px;
            transition: background 0.3s;
            font-weight: 500;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab.active {
            background: var(--primary);
            box-shadow: 0 3px 10px rgba(108, 92, 231, 0.3);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* History Chart */
        .history-chart {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .chart-container {
            height: 200px;
            width: 100%;
            margin-top: 15px;
        }

        /* Uptime Stats */
        .uptime-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .uptime-stat {
            text-align: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border-left: 3px solid var(--primary);
        }

        .uptime-value {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .uptime-label {
            font-size: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
        }

        /* Events Log Section */
        .events-section {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .events-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            gap: 15px;
        }

        .events-buttons {
            display: flex;
            gap: 10px;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text);
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .control-btn.export {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        }

        .control-btn.clear {
            background: linear-gradient(135deg, var(--danger), #c44569);
        }

        .events-list-container {
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .events-list-container::-webkit-scrollbar {
            width: 8px;
        }

        .events-list-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .events-list-container::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 10px;
        }

        .event-item {
            padding: 15px;
            margin-bottom: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border-left: 4px solid var(--info);
            transition: background 0.3s;
        }

        .event-item:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .event-item.critical {
            border-left-color: var(--danger);
            background: rgba(232, 67, 147, 0.1);
        }

        .event-item.warning {
            border-left-color: var(--warning);
            background: rgba(253, 203, 110, 0.1);
        }

        .event-item.success {
            border-left-color: var(--success);
            background: rgba(0, 184, 148, 0.1);
        }

        .event-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .event-type {
            font-size: 12px;
            font-weight: 600;
            padding: 4px 10px;
            border-radius: 20px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .event-type.critical {
            background: var(--danger);
            color: white;
        }

        .event-type.warning {
            background: var(--warning);
            color: var(--dark);
        }

        .event-type.info {
            background: var(--info);
            color: white;
        }

        .event-type.success {
            background: var(--success);
            color: white;
        }

        .event-time {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .event-message {
            font-size: 14px;
            margin-bottom: 5px;
            color: var(--text);
        }

        .event-details {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        .no-events {
            text-align: center;
            padding: 40px;
            color: var(--text-secondary);
            font-style: italic;
        }

        /* Discord Integration Section */
        .discord-section {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .discord-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            font-size: 14px;
        }

        .discord-status.online {
            color: var(--success);
        }

        .discord-status.offline {
            color: var(--text-secondary);
        }

        .discord-icon {
            font-size: 20px;
        }

        .discord-connection {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border-left: 4px solid var(--primary);
        }

        .discord-connection-info {
            flex: 1;
        }

        .discord-connection-title {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 16px;
        }

        .discord-connection-desc {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .discord-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .toggle-label {
            font-size: 14px;
            color: var(--text);
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.2);
            transition: .4s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--success);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        .discord-notification-types {
            margin-top: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .notification-types-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text);
        }

        .notification-types-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .notification-type-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 8px;
            transition: background 0.3s;
        }

        .notification-type-item:hover {
            background: rgba(255, 255, 255, 0.12);
        }

        .notification-type-checkbox {
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
        }

        .notification-type-label {
            font-size: 14px;
            color: var(--text);
            cursor: pointer;
        }

        .discord-test-btn {
            background: linear-gradient(135deg, #7289da, #5b6eae);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 20px;
            width: 100%;
        }

        .discord-test-btn:hover {
            background: linear-gradient(135deg, #5b6eae, #7289da);
            transform: translateY(-2px);
        }

        /* Minecraft Avatar Colors */
        .minecraft-block {
            display: inline-block;
            width: 16px;
            height: 16px;
            margin-right: 5px;
            border-radius: 3px;
            vertical-align: middle;
        }

        .block-grass {
            background: linear-gradient(135deg, #7CFC00, #32CD32);
        }

        .block-diamond {
            background: linear-gradient(135deg, #4EE2EC, #00BFFF);
        }

        .block-redstone {
            background: linear-gradient(135deg, #FF5555, #DC143C);
        }

        .block-emerald {
            background: linear-gradient(135deg, #00FF7F, #00CC66);
        }

        .block-gold {
            background: linear-gradient(135deg, #FFD700, #FFA500);
        }

        .block-iron {
            background: linear-gradient(135deg, #C0C0C0, #A0A0A0);
        }

        .block-stone {
            background: linear-gradient(135deg, #808080, #606060);
        }

        .block-wood {
            background: linear-gradient(135deg, #8B7355, #A0522D);
        }

        /* Connection Quality Indicator */
        .connection-quality {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            margin-left: 10px;
        }

        .connection-quality.excellent {
            background: rgba(0, 184, 148, 0.2);
            color: var(--success);
        }

        .connection-quality.good {
            background: rgba(116, 185, 255, 0.2);
            color: var(--info);
        }

        .connection-quality.poor {
            background: rgba(253, 203, 110, 0.2);
            color: var(--warning);
        }

        .connection-quality.bad {
            background: rgba(232, 67, 147, 0.2);
            color: var(--danger);
        }

        /* Critical Alert */
        .critical-alert {
            background: linear-gradient(135deg, var(--danger), #c44569);
            color: white;
            padding: 15px 20px;
            border-radius: 12px;
            margin: 20px 30px 0 30px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 5px 15px rgba(232, 67, 147, 0.3);
            animation: pulse 2s infinite;
        }

        .critical-alert.hidden {
            display: none;
        }

        .alert-icon {
            font-size: 24px;
        }

        .alert-content {
            flex: 1;
        }

        .alert-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .alert-message {
            font-size: 14px;
            opacity: 0.9;
        }

        /* Settings Panel */
        .settings-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 380px;
            height: 100vh;
            background: rgba(30, 30, 45, 0.95);
            backdrop-filter: blur(10px);
            border-left: 1px solid rgba(255, 255, 255, 0.1);
            padding: 30px;
            overflow-y: auto;
            transition: right 0.3s ease;
            z-index: 1001;
        }

        .settings-panel.active {
            right: 0;
        }

        .settings-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: none;
        }

        .settings-overlay.active {
            display: block;
        }

        .settings-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--primary);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 999;
            box-shadow: 0 5px 15px rgba(108, 92, 231, 0.3);
            transition: all 0.3s;
        }

        .settings-btn:hover {
            background: var(--primary-dark);
            transform: rotate(30deg);
        }

        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .settings-title {
            font-size: 24px;
            font-weight: 600;
        }

        .settings-close {
            background: none;
            border: none;
            color: var(--text);
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
            transition: color 0.2s;
        }

        .settings-close:hover {
            color: var(--danger);
        }

        .settings-group {
            margin-bottom: 30px;
        }

        .settings-group-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--primary-light);
        }

        .settings-item {
            margin-bottom: 20px;
        }

        .settings-item-title {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--text);
        }

        .settings-item-description {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .settings-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .settings-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .settings-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.2);
            transition: .4s;
            border-radius: 24px;
        }

        .settings-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .settings-slider {
            background-color: var(--primary);
        }

        input:checked + .settings-slider:before {
            transform: translateX(26px);
        }

        .settings-select {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 10px 15px;
            color: var(--text);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .settings-select:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.15);
        }

        .settings-input {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 10px 15px;
            color: var(--text);
            font-size: 14px;
            transition: all 0.3s;
        }

        .settings-input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.15);
        }

        .settings-save-btn {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            width: 100%;
            margin-top: 20px;
        }

        .settings-save-btn:hover {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            transform: translateY(-2px);
        }

        /* Custom Scrollbar */
        .player-list::-webkit-scrollbar,
        .events-list-container::-webkit-scrollbar,
        .settings-panel::-webkit-scrollbar {
            width: 6px;
        }

        .player-list::-webkit-scrollbar-track,
        .events-list-container::-webkit-scrollbar-track,
        .settings-panel::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .player-list::-webkit-scrollbar-thumb,
        .events-list-container::-webkit-scrollbar-thumb,
        .settings-panel::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 10px;
        }

        /* Loading Animation */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .loading-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 5px solid rgba(255, 255, 255, 0.1);
            border-top: 5px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        .loading-text {
            color: var(--text);
            font-size: 18px;
            font-weight: 500;
            text-align: center;
        }

        /* Custom Animations */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .shake {
            animation: shake 0.5s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .bounce {
            animation: bounce 0.5s ease;
        }

        /* Discord Message Preview */
        .discord-preview {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            border-left: 4px solid #7289da;
        }

        .preview-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text);
        }

        .preview-content {
            background: rgba(54, 57, 63, 0.8);
            border-radius: 8px;
            padding: 15px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 14px;
            color: #dcddde;
        }

        .preview-embed {
            background: rgba(47, 49, 54, 0.8);
            border-left: 4px solid #7289da;
            padding: 12px;
            border-radius: 4px;
            margin-top: 10px;
        }

        .preview-embed-title {
            color: white;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .preview-embed-description {
            color: #dcddde;
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .preview-embed-footer {
            color: #72767d;
            font-size: 12px;
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* JSON Viewer */
        .json-viewer {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            overflow-x: auto;
            max-height: 300px;
        }

        .json-key {
            color: #9cdcfe;
        }

        .json-value {
            color: #ce9178;
        }

        .json-string {
            color: #ce9178;
        }

        .json-number {
            color: #b5cea8;
        }

        .json-boolean {
            color: #569cd6;
        }

        .json-null {
            color: #569cd6;
        }
    </style>
</head>
<body>
    <!-- Particles Background -->
    <div class="particles" id="particles-container"></div>

    <!-- Settings Button -->
    <div class="settings-btn" id="settings-btn">
        <i class="fas fa-cog"></i>
    </div>

    <!-- Settings Overlay -->
    <div class="settings-overlay" id="settings-overlay"></div>

    <!-- Settings Panel -->
    <div class="settings-panel" id="settings-panel">
        <div class="settings-header">
            <div class="settings-title">Settings</div>
            <button class="settings-close" id="settings-close">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="settings-group">
            <div class="settings-group-title">Notifications</div>
            
            <div class="settings-item">
                <div class="settings-item-title">Browser Notifications</div>
                <div class="settings-item-description">Show desktop notifications for server events</div>
                <label class="settings-switch">
                    <input type="checkbox" id="notifications-enabled" checked>
                    <span class="settings-slider"></span>
                </label>
            </div>

            <div class="settings-item">
                <div class="settings-item-title">Notification Sound</div>
                <select class="settings-select" id="notification-sound">
                    <option value="none">No Sound</option>
                    <option value="chime" selected>Chime</option>
                    <option value="bell">Bell</option>
                    <option value="ding">Ding</option>
                </select>
            </div>
        </div>

        <div class="settings-group">
            <div class="settings-group-title">Display</div>
            
            <div class="settings-item">
                <div class="settings-item-title">Auto-Refresh Interval</div>
                <select class="settings-select" id="refresh-interval">
                    <option value="10">10 seconds</option>
                    <option value="30" selected>30 seconds</option>
                    <option value="60">1 minute</option>
                    <option value="300">5 minutes</option>
                </select>
            </div>

            <div class="settings-item">
                <div class="settings-item-title">Player Avatar Style</div>
                <select class="settings-select" id="avatar-style">
                    <option value="minecraft" selected>Minecraft Blocks</option>
                    <option value="icons">Icons Only</option>
                    <option value="gradient">Gradient Colors</option>
                </select>
            </div>
        </div>

        <button class="settings-save-btn" id="settings-save">Save Settings</button>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Loading...</div>
    </div>

    <!-- Notification Container -->
    <div class="notification-container" id="notification-container"></div>

    <!-- Main Panel Container -->
    <div class="panel-container">
        <!-- Critical Alert -->
        <div class="critical-alert hidden" id="critical-alert">
            <div class="alert-icon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <div class="alert-content">
                <div class="alert-title"> Server Issue Detected</div>
                <div class="alert-message">We're experiencing technical difficulties. Our team is working to resolve the issue. We apologize for the inconvenience.</div>
            </div>
        </div>

        <!-- Banner Section -->
        <div class="banner">
            <div class="banner-content">
                <div class="server-logo">
                    <i class="fas fa-server"></i>
                </div>
                <h1>Forexter Network</h1>
                <p>PocketMine-MP Edition  Advanced Monitoring</p>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Status Header -->
            <div class="status-header">
                <div class="status-indicator">
                    <div class="status-dot checking" id="status-dot"></div>
                    <div class="status-text" id="status-text">Checking Server Status...</div>
                    <span class="connection-quality excellent" id="connection-quality">
                        <i class="fas fa-wifi"></i> Excellent
                    </span>
                </div>
                <div class="last-updated" id="last-updated">Last updated: -</div>
            </div>

            <!-- Tabs -->
            <div class="tabs">
                <div class="tab active" data-tab="overview">Overview</div>
                <div class="tab" data-tab="events">Events Log</div>
                <div class="tab" data-tab="history">History</div>
                <div class="tab" data-tab="discord">Discord</div>
            </div>

            <!-- Overview Tab -->
            <div class="tab-content active" id="overview-tab">
                <!-- Favicon -->
                <div class="favicon-container">
                    <img id="server-favicon" class="server-favicon" src="" alt="Server Favicon" style="display: none;">
                </div>

                <!-- Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-value" id="player-count">-/-</div>
                        <div class="stat-label">Online Players</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-signal"></i>
                        </div>
                        <div class="stat-value" id="ping-value">- ms</div>
                        <div class="stat-label">Server Ping</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-code-branch"></i>
                        </div>
                        <div class="stat-value" id="version">-</div>
                        <div class="stat-label">Minecraft Version</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-microchip"></i>
                        </div>
                        <div class="stat-value" id="protocol">-</div>
                        <div class="stat-label">Protocol Version</div>
                    </div>
                </div>

                <!-- Players Section -->
                <div class="players-section">
                    <div class="section-header">
                        <div class="section-title">
                            <i class="fas fa-user-friends"></i> Online Players
                        </div>
                        <div class="player-count" id="player-count-text">0 players online</div>
                    </div>
                    <div class="player-list" id="player-list">
                        <div class="no-players">No players online</div>
                    </div>
                </div>

                <!-- Server Info -->
                <div class="server-info">
                    <div class="section-header">
                        <div class="section-title">
                            <i class="fas fa-info-circle"></i> Server Information
                        </div>
                    </div>
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">MOTD</div>
                            <div class="info-value" id="motd">-</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Server Address</div>
                            <div class="info-value" id="server-address">-</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Server Type</div>
                            <div class="info-value" id="server-software">-</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">Last Checked</div>
                            <div class="info-value" id="last-checked">-</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Events Tab -->
            <div class="tab-content" id="events-tab">
                <div class="events-section">
                    <div class="events-controls">
                        <div class="section-title">
                            <i class="fas fa-clipboard-list"></i> Server Events Log
                        </div>
                        <div class="events-buttons">
                            <button class="control-btn export" id="export-events">
                                <i class="fas fa-download"></i> Export JSON
                            </button>
                            <button class="control-btn clear" id="clear-events">
                                <i class="fas fa-trash"></i> Clear All
                            </button>
                        </div>
                    </div>
                    <div class="events-list-container" id="events-list">
                        <div class="no-events">No events recorded yet</div>
                    </div>

                    <!-- JSON Viewer -->
                    <div class="json-viewer" id="json-viewer" style="display: none;">
                        <pre id="json-content"></pre>
                    </div>
                </div>
            </div>

            <!-- History Tab -->
            <div class="tab-content" id="history-tab">
                <div class="history-chart">
                    <div class="section-header">
                        <div class="section-title">
                            <i class="fas fa-chart-bar"></i> Player Activity (Last 24 Hours)
                        </div>
                    </div>
                    <div class="chart-container" id="player-chart">
                        <canvas id="historyChart"></canvas>
                    </div>
                </div>
                <div class="server-info">
                    <div class="section-header">
                        <div class="section-title">
                            <i class="fas fa-history"></i> Server History
                        </div>
                    </div>
                    <div class="uptime-stats">
                        <div class="uptime-stat">
                            <div class="uptime-value" id="daily-uptime">-</div>
                            <div class="uptime-label">24h Uptime</div>
                        </div>
                        <div class="uptime-stat">
                            <div class="uptime-value" id="weekly-uptime">-</div>
                            <div class="uptime-label">7d Uptime</div>
                        </div>
                        <div class="uptime-stat">
                            <div class="uptime-value" id="monthly-uptime">-</div>
                            <div class="uptime-label">30d Uptime</div>
                        </div>
                        <div class="uptime-stat">
                            <div class="uptime-value" id="total-uptime">-</div>
                            <div class="uptime-label">All Time</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Discord Tab -->
            <div class="tab-content" id="discord-tab">
                <div class="discord-section">
                    <div class="section-header">
                        <div class="section-title">
                            <i class="fab fa-discord"></i> Discord Integration
                        </div>
                    </div>
                    
                    <!-- Discord Connection Status -->
                    <div class="discord-connection">
                        <div class="discord-connection-info">
                            <div class="discord-connection-title">Discord Webhook Connected</div>
                            <div class="discord-connection-desc">Webhook URL: <span id="webhook-preview">https://discord.com/api/webhooks/1447155628156911646/...</span></div>
                        </div>
                        <div class="discord-toggle">
                            <span class="toggle-label">Enabled</span>
                            <label class="toggle-switch">
                                <input type="checkbox" id="discord-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>

                    <!-- Discord Status -->
                    <div class="discord-status online" id="discord-status">
                        <i class="fab fa-discord discord-icon"></i>
                        <span id="discord-status-text"> Discord webhook is ready</span>
                    </div>

                    <!-- Notification Types -->
                    <div class="discord-notification-types">
                        <div class="notification-types-title">Send notifications for:</div>
                        <div class="notification-types-grid">
                            <div class="notification-type-item">
                                <input type="checkbox" class="notification-type-checkbox" id="notify-server-down" checked>
                                <label class="notification-type-label" for="notify-server-down">Server Down/Restart</label>
                            </div>
                            <div class="notification-type-item">
                                <input type="checkbox" class="notification-type-checkbox" id="notify-player-join" checked>
                                <label class="notification-type-label" for="notify-player-join">Player Join/Leave</label>
                            </div>
                            <div class="notification-type-item">
                                <input type="checkbox" class="notification-type-checkbox" id="notify-server-lag" checked>
                                <label class="notification-type-label" for="notify-server-lag">Server Lag/Issues</label>
                            </div>
                            <div class="notification-type-item">
                                <input type="checkbox" class="notification-type-checkbox" id="notify-server-up" checked>
                                <label class="notification-type-label" for="notify-server-up">Server Online</label>
                            </div>
                        </div>
                    </div>

                    <!-- Discord Message Preview -->
                    <div class="discord-preview">
                        <div class="preview-title">Message Preview:</div>
                        <div class="preview-content">
                            <strong>Forexter Network Monitor</strong>
                            <div class="preview-embed">
                                <div class="preview-embed-title"> Forexter Network - Server Online</div>
                                <div class="preview-embed-description">
                                    Server is now online and ready to play!<br>
                                     Players: 15/50<br>
                                     Ping: 32ms<br>
                                     Status: All systems operational
                                </div>
                                <div class="preview-embed-footer">
                                    <i class="fas fa-clock"></i> Just now  Forexter Network Monitoring System
                                </div>
                            </div>
                        </div>
                    </div>

                    <button class="discord-test-btn" id="test-discord">
                        <i class="fas fa-paper-plane"></i> Send Test Notification to Discord
                    </button>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="refresh-info">
                <button class="refresh-btn" id="refresh-btn">
                    <i class="fas fa-sync-alt"></i> Refresh Now
                </button>
                <span id="refresh-text">Auto-refresh every 30 seconds</span>
            </div>
            <div class="copyright">
                &copy; 2025 Forexter Network | Advanced Monitoring System
            </div>
        </div>
    </div>

    <script>
        // Advanced Server Monitoring System with Discord Webhook
        class ServerMonitor {
            constructor() {
                this.serverHistory = {
                    playerData: [],
                    uptimeData: [],
                    events: [],
                    maxDataPoints: 288
                };
                
                // Default settings with your Discord webhook
                this.settings = {
                    notifications: true,
                    notificationSound: 'chime',
                    discordWebhook: 'https://discord.com/api/webhooks/1447155628156911646/NMdFtMnXPTD0gSdA2o40KeecTdGiAnCOi1QUe9Nq8FTW8ni1KRpAaIu9-LZaeehbchvh',
                    discordEnabled: true,
                    discordEvents: {
                        serverDown: true,
                        serverUp: true,
                        playerJoin: true,
                        playerLeave: true,
                        serverLag: true,
                        serverRestart: true
                    },
                    refreshInterval: 30,
                    avatarStyle: 'minecraft'
                };
                
                this.previousStatus = null;
                this.previousPlayers = [];
                this.historyChart = null;
                this.autoRefreshInterval = null;
                this.isInitialized = false;
                
                // Minecraft block icons mapping
                this.minecraftIcons = [
                    { class: 'grass', icon: 'fas fa-leaf' },
                    { class: 'diamond', icon: 'fas fa-gem' },
                    { class: 'redstone', icon: 'fas fa-bolt' },
                    { class: 'emerald', icon: 'fas fa-gem' },
                    { class: 'gold', icon: 'fas fa-coins' },
                    { class: 'iron', icon: 'fas fa-cube' },
                    { class: 'stone', icon: 'fas fa-mountain' },
                    { class: 'wood', icon: 'fas fa-tree' }
                ];
            }

            async initialize() {
                await this.loadSettings();
                await this.loadHistory();
                this.initParticles();
                this.initChart();
                this.initEventListeners();
                this.initNotificationSystem();
                await this.loadServerStatus();
                this.startAutoRefresh();
                this.isInitialized = true;
                
                // Show welcome notification
                setTimeout(() => {
                    this.showNotification(
                        'Forexter Network Monitor',
                        'System initialized and connected to Discord',
                        'success'
                    );
                }, 1000);
            }

            // Settings Management
            async loadSettings() {
                const saved = localStorage.getItem('serverMonitorSettings');
                if (saved) {
                    this.settings = { ...this.settings, ...JSON.parse(saved) };
                }
                this.applySettings();
            }

            saveSettings() {
                localStorage.setItem('serverMonitorSettings', JSON.stringify(this.settings));
                this.applySettings();
            }

            applySettings() {
                // Update UI based on settings
                document.getElementById('notifications-enabled').checked = this.settings.notifications;
                document.getElementById('notification-sound').value = this.settings.notificationSound;
                document.getElementById('refresh-interval').value = this.settings.refreshInterval;
                document.getElementById('avatar-style').value = this.settings.avatarStyle;
                document.getElementById('discord-toggle').checked = this.settings.discordEnabled;
                document.getElementById('refresh-text').textContent = `Auto-refresh every ${this.settings.refreshInterval} seconds`;
                
                // Update Discord checkboxes
                document.getElementById('notify-server-down').checked = this.settings.discordEvents.serverDown;
                document.getElementById('notify-player-join').checked = this.settings.discordEvents.playerJoin;
                document.getElementById('notify-server-lag').checked = this.settings.discordEvents.serverLag;
                document.getElementById('notify-server-up').checked = this.settings.discordEvents.serverUp;
                
                // Update Discord status
                this.updateDiscordStatus();
                
                // Update webhook preview
                const webhookPreview = document.getElementById('webhook-preview');
                if (this.settings.discordWebhook) {
                    const parts = this.settings.discordWebhook.split('/');
                    webhookPreview.textContent = `https://discord.com/api/webhooks/${parts[5]}/...`;
                }
                
                // Restart auto-refresh with new interval
                if (this.autoRefreshInterval) {
                    clearInterval(this.autoRefreshInterval);
                    this.startAutoRefresh();
                }
            }

            // Notification System
            initNotificationSystem() {
                // Request notification permission
                if ('Notification' in window && Notification.permission === 'default') {
                    Notification.requestPermission();
                }
            }

            showNotification(title, message, type = 'info', duration = 5000) {
                if (!this.settings.notifications) return;

                const container = document.getElementById('notification-container');
                const notification = document.createElement('div');
                const notificationId = Date.now();
                
                notification.className = `notification ${type}`;
                notification.id = `notification-${notificationId}`;
                notification.innerHTML = `
                    <div class="notification-icon">
                        <i class="fas fa-${this.getNotificationIcon(type)}"></i>
                    </div>
                    <div class="notification-content">
                        <div class="notification-title">${title}</div>
                        <div class="notification-message">${message}</div>
                    </div>
                    <button class="notification-close" onclick="monitor.removeNotification('${notificationId}')">
                        <i class="fas fa-times"></i>
                    </button>
                    <div class="notification-progress">
                        <div class="notification-progress-bar"></div>
                    </div>
                `;
                
                container.appendChild(notification);
                
                // Show notification
                setTimeout(() => {
                    notification.classList.add('show');
                }, 10);

                // Play sound
                this.playNotificationSound(type);

                // Auto remove
                setTimeout(() => {
                    this.removeNotification(notificationId);
                }, duration);

                // Browser notification
                if (this.settings.notifications && Notification.permission === 'granted') {
                    new Notification(title, { 
                        body: message, 
                        icon: 'https://files.catbox.moe/pvnz0v.jpg',
                        tag: 'forexter-notification'
                    });
                }
            }

            removeNotification(id) {
                const notification = document.getElementById(`notification-${id}`);
                if (notification) {
                    notification.classList.remove('show');
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 400);
                }
            }

            getNotificationIcon(type) {
                const icons = {
                    success: 'check-circle',
                    error: 'exclamation-circle',
                    warning: 'exclamation-triangle',
                    info: 'info-circle'
                };
                return icons[type] || 'info-circle';
            }

            playNotificationSound(type) {
                if (this.settings.notificationSound === 'none') return;

                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                const frequencies = {
                    success: 523.25, // C5
                    error: 349.23,   // F4
                    warning: 392.00, // G4
                    info: 440.00     // A4
                };

                oscillator.frequency.value = frequencies[type] || 440;
                oscillator.type = 'sine';

                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);

                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
            }

            // Event Log System
            addEvent(type, message, details = {}) {
                const event = {
                    id: Date.now(),
                    timestamp: new Date().toISOString(),
                    type: type,
                    message: message,
                    details: details,
                    server: {
                        players: details.players || 0,
                        status: details.status || 'unknown',
                        ping: details.ping || null
                    }
                };

                this.serverHistory.events.unshift(event);
                if (this.serverHistory.events.length > 100) {
                    this.serverHistory.events.pop();
                }

                this.saveHistory();
                this.displayEvent(event);

                // Send to Discord if enabled
                if (this.settings.discordEnabled && this.shouldSendToDiscord(type, details)) {
                    this.sendToDiscord(event);
                }

                // Show notification for important events
                if (type === 'critical' || type === 'warning') {
                    this.showNotification(
                        'Server Event',
                        message,
                        type === 'critical' ? 'error' : 'warning'
                    );
                }
            }

            shouldSendToDiscord(eventType, details) {
                if (!this.settings.discordEnabled) return false;
                
                // Check specific event types
                if (details.action === 'server_down' && !this.settings.discordEvents.serverDown) return false;
                if (details.action === 'server_up' && !this.settings.discordEvents.serverUp) return false;
                if (details.action === 'player_join' && !this.settings.discordEvents.playerJoin) return false;
                if (details.action === 'player_leave' && !this.settings.discordEvents.playerLeave) return false;
                if (details.action === 'server_lag' && !this.settings.discordEvents.serverLag) return false;
                
                return true;
            }

            displayEvent(event) {
                const eventsList = document.getElementById('events-list');
                const noEvents = eventsList.querySelector('.no-events');
                
                if (noEvents) {
                    eventsList.removeChild(noEvents);
                }

                const eventItem = document.createElement('div');
                eventItem.className = `event-item ${event.type}`;
                
                let detailsHtml = '';
                if (event.details) {
                    detailsHtml = Object.entries(event.details)
                        .map(([key, value]) => `${key}: ${value}`)
                        .join(' | ');
                }
                
                eventItem.innerHTML = `
                    <div class="event-header">
                        <span class="event-type ${event.type}">${event.type.toUpperCase()}</span>
                        <span class="event-time">${new Date(event.timestamp).toLocaleTimeString()}</span>
                    </div>
                    <div class="event-message">${event.message}</div>
                    <div class="event-details">
                        ${detailsHtml}
                    </div>
                `;

                eventsList.insertBefore(eventItem, eventsList.firstChild);
            }

            clearEvents() {
                this.serverHistory.events = [];
                const eventsList = document.getElementById('events-list');
                eventsList.innerHTML = '<div class="no-events">No events recorded yet</div>';
                this.saveHistory();
                this.showNotification('Events Cleared', 'All events have been cleared', 'info');
            }

            exportEvents() {
                const dataStr = JSON.stringify(this.serverHistory.events, null, 2);
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                
                const exportFileDefaultName = `forexter-events-${new Date().toISOString().split('T')[0]}.json`;
                
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportFileDefaultName);
                linkElement.click();
                
                this.showNotification('Export Complete', 'Events data exported successfully', 'success');
                
                // Show JSON in viewer
                const jsonViewer = document.getElementById('json-viewer');
                const jsonContent = document.getElementById('json-content');
                jsonContent.innerHTML = this.syntaxHighlight(JSON.stringify(this.serverHistory.events, null, 2));
                jsonViewer.style.display = 'block';
            }

            syntaxHighlight(json) {
                json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
                return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, 
                    function (match) {
                        let cls = 'json-number';
                        if (/^"/.test(match)) {
                            if (/:$/.test(match)) {
                                cls = 'json-key';
                            } else {
                                cls = 'json-string';
                            }
                        } else if (/true|false/.test(match)) {
                            cls = 'json-boolean';
                        } else if (/null/.test(match)) {
                            cls = 'json-null';
                        }
                        return '<span class="' + cls + '">' + match + '</span>';
                    });
            }

            // Discord Integration
            updateDiscordStatus() {
                const statusText = document.getElementById('discord-status-text');
                const discordStatus = document.getElementById('discord-status');
                
                if (this.settings.discordEnabled && this.settings.discordWebhook) {
                    statusText.textContent = ' Discord webhook is ready';
                    discordStatus.className = 'discord-status online';
                } else {
                    statusText.textContent = ' Discord webhook is disabled';
                    discordStatus.className = 'discord-status offline';
                }
            }

            async sendToDiscord(event) {
                if (!this.settings.discordWebhook || !this.settings.discordEnabled) return;

                try {
                    let embed;
                    
                    // Create appropriate embed based on event type
                    switch (event.details?.action) {
                        case 'server_down':
                            embed = this.createServerDownEmbed(event);
                            break;
                        case 'server_up':
                            embed = this.createServerUpEmbed(event);
                            break;
                        case 'player_join':
                            embed = this.createPlayerJoinEmbed(event);
                            break;
                        case 'player_leave':
                            embed = this.createPlayerLeaveEmbed(event);
                            break;
                        case 'server_lag':
                            embed = this.createServerLagEmbed(event);
                            break;
                        default:
                            embed = this.createGenericEmbed(event);
                    }

                    const response = await fetch(this.settings.discordWebhook, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            embeds: [embed],
                            username: 'Forexter Network Monitor',
                            avatar_url: 'https://files.catbox.moe/pvnz0v.jpg'
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${await response.text()}`);
                    }

                    console.log(' Discord notification sent successfully');
                    
                } catch (error) {
                    console.error(' Error sending to Discord:', error);
                    this.addEvent('warning', 'Failed to send notification to Discord', { 
                        error: error.message,
                        suggestion: 'Check webhook URL and permissions'
                    });
                }
            }

            createServerDownEmbed(event) {
                return {
                    title: ' SERVER OFFLINE',
                    description: `**Forexter Network** saat ini **OFFLINE**\n\n` +
                                ` **Status:** ${event.details.reason || 'Unexpected downtime'}\n` +
                                ` **Downtime:** Detected at ${new Date(event.timestamp).toLocaleTimeString()}\n` +
                                ` **Action:** Investigating...\n\n` +
                                `** Kami mohon maaf atas ketidaknyamanan ini.**\n` +
                                `Tim teknis Forexter sedang bekerja keras untuk memperbaiki masalah ini.\n` +
                                `Terima kasih atas pengertian dan kesabaran Anda.\n\n` +
                                `*Hormat kami,\n**Forexter Team***`,
                    color: 0xe74c3c,
                    timestamp: event.timestamp,
                    footer: {
                        text: 'Forexter Network Monitoring System',
                        icon_url: 'https://files.catbox.moe/pvnz0v.jpg'
                    },
                    thumbnail: {
                        url: 'https://files.catbox.moe/pvnz0v.jpg'
                    }
                };
            }

            createServerUpEmbed(event) {
                return {
                    title: ' SERVER ONLINE',
                    description: `**Forexter Network** sekarang **ONLINE** dan siap dimainkan!\n\n` +
                                ` **Players:** ${event.server.players}/50\n` +
                                ` **Ping:** ${event.server.ping || 'N/A'}ms\n` +
                                ` **Status:** All systems operational\n\n` +
                                `*Selamat bermain!*`,
                    color: 0x2ecc71,
                    timestamp: event.timestamp,
                    footer: {
                        text: 'Forexter Network Monitoring System',
                        icon_url: 'https://files.catbox.moe/pvnz0v.jpg'
                    },
                    thumbnail: {
                        url: 'https://files.catbox.moe/pvnz0v.jpg'
                    }
                };
            }

            createPlayerJoinEmbed(event) {
                return {
                    title: ' PLAYER JOINED',
                    description: `**${event.details.player}** telah bergabung dengan server!\n\n` +
                                ` Welcome to Forexter Network!\n` +
                                ` **Online Players:** ${event.server.players}`,
                    color: 0x3498db,
                    timestamp: event.timestamp,
                    footer: {
                        text: 'Forexter Network Monitoring System',
                        icon_url: 'https://files.catbox.moe/pvnz0v.jpg'
                    },
                    thumbnail: {
                        url: 'https://files.catbox.moe/pvnz0v.jpg'
                    }
                };
            }

            createPlayerLeaveEmbed(event) {
                return {
                    title: ' PLAYER LEFT',
                    description: `**${event.details.player}** telah meninggalkan server\n\n` +
                                ` **Online Players:** ${event.server.players}\n` +
                                ` **Session Duration:** ${event.details.playtime || 'Unknown'}`,
                    color: 0xf39c12,
                    timestamp: event.timestamp,
                    footer: {
                        text: 'Forexter Network Monitoring System',
                        icon_url: 'https://files.catbox.moe/pvnz0v.jpg'
                    },
                    thumbnail: {
                        url: 'https://files.catbox.moe/pvnz0v.jpg'
                    }
                };
            }

            createServerLagEmbed(event) {
                return {
                    title: ' HIGH LATENCY DETECTED',
                    description: `**Server mengalami latency tinggi!**\n\n` +
                                ` **Ping:** ${event.server.ping}ms (Above threshold)\n` +
                                ` **Players Online:** ${event.server.players}\n` +
                                ` **Status:** Monitoring performance...\n\n` +
                                `*Tim teknis telah diberitahu dan sedang memantau situasi.*`,
                    color: 0xf1c40f,
                    timestamp: event.timestamp,
                    footer: {
                        text: 'Forexter Network Monitoring System',
                        icon_url: 'https://files.catbox.moe/pvnz0v.jpg'
                    },
                    thumbnail: {
                        url: 'https://files.catbox.moe/pvnz0v.jpg'
                    }
                };
            }

            createGenericEmbed(event) {
                return {
                    title: ' SERVER UPDATE',
                    description: event.message,
                    color: 0x7289da,
                    timestamp: event.timestamp,
                    fields: [
                        {
                            name: ' Players Online',
                            value: event.server.players.toString(),
                            inline: true
                        },
                        {
                            name: ' Server Status',
                            value: event.server.status,
                            inline: true
                        }
                    ],
                    footer: {
                        text: 'Forexter Network Monitoring System',
                        icon_url: 'https://files.catbox.moe/pvnz0v.jpg'
                    },
                    thumbnail: {
                        url: 'https://files.catbox.moe/pvnz0v.jpg'
                    }
                };
            }

            async testDiscord() {
                try {
                    this.showNotification('Testing Discord', 'Sending test notification...', 'info');
                    
                    const testEvent = {
                        type: 'info',
                        message: ' **TEST NOTIFICATION**\nForexter Network Monitoring System is now connected!\n\nSemua status server akan dikirim ke channel ini secara otomatis.',
                        server: { players: 15, status: 'online', ping: 32 },
                        timestamp: new Date().toISOString(),
                        details: {
                            action: 'test',
                            note: 'This is a test notification from the monitoring system'
                        }
                    };

                    await this.sendToDiscord(testEvent);
                    this.showNotification('Success', ' Test notification sent to Discord!', 'success');
                    
                } catch (error) {
                    this.showNotification('Error', ` Failed to send test: ${error.message}`, 'error');
                    console.error('Discord test error:', error);
                }
            }

            // Server Monitoring
            async loadServerStatus(manualRefresh = false) {
                const refreshBtn = document.getElementById('refresh-btn');
                
                try {
                    if (manualRefresh) {
                        refreshBtn.classList.add('loading');
                        refreshBtn.disabled = true;
                    }

                    // Show loading state
                    this.updateStatus('checking', 'Checking Server Status...');
                    
                    // Fetch data from mcstatus.io API
                    const response = await fetch('https://api.mcstatus.io/v2/status/bedrock/basic-6.alstore.space:25710');
                    const data = await response.json();
                    
                    // Process server response
                    await this.processServerResponse(data, manualRefresh);
                    
                } catch (error) {
                    console.error('Error fetching server status:', error);
                    this.handleServerError(error, manualRefresh);
                } finally {
                    if (manualRefresh) {
                        setTimeout(() => {
                            refreshBtn.classList.remove('loading');
                            refreshBtn.disabled = false;
                        }, 1000);
                    }
                }
            }

            async processServerResponse(data, manualRefresh = false) {
                const currentStatus = data.online ? 'online' : 'offline';
                const currentPlayers = data.players?.list || [];
                
                // Detect changes and add events
                this.detectChanges(currentStatus, currentPlayers, data);
                
                // Update UI
                this.updateServerDisplay(data);
                
                // Update history and chart
                if (data.online && data.players) {
                    this.updateChart(data.players.online);
                    this.updateUptimeStats(data.online);
                }
                
                // Update connection quality
                this.updateConnectionQuality(data.round_trip_latency_ms);
                
                // Show notification for manual refresh
                if (manualRefresh) {
                    this.showNotification('Status Updated', 'Server status refreshed successfully', 'success');
                }
                
                // Update previous state
                this.previousStatus = currentStatus;
                this.previousPlayers = currentPlayers.map(p => p.name_clean || p.name);
            }

            detectChanges(currentStatus, currentPlayers, data) {
                const now = new Date();
                
                // Detect server status change
                if (this.previousStatus !== null && this.previousStatus !== currentStatus) {
                    if (currentStatus === 'online') {
                        this.addEvent('success', 'Server is now online', {
                            players: data.players?.online || 0,
                            status: 'online',
                            ping: data.round_trip_latency_ms,
                            action: 'server_up'
                        });
                        // Hide critical alert
                        document.getElementById('critical-alert').classList.add('hidden');
                    } else {
                        this.addEvent('critical', 'Server is offline', {
                            players: 0,
                            status: 'offline',
                            reason: 'Connection lost',
                            action: 'server_down'
                        });
                        
                        // Show critical alert
                        const criticalAlert = document.getElementById('critical-alert');
                        criticalAlert.classList.remove('hidden');
                        criticalAlert.querySelector('.alert-message').textContent = 
                            `Server went offline at ${now.toLocaleTimeString()}. Our team is working to resolve the issue. We apologize for the inconvenience.`;
                    }
                }

                // Detect player join/leave
                if (this.previousStatus === 'online' && currentStatus === 'online') {
                    const previousNames = this.previousPlayers;
                    const currentNames = currentPlayers.map(p => p.name_clean || p.name);
                    
                    // Players who joined
                    const joined = currentNames.filter(name => !previousNames.includes(name));
                    // Players who left
                    const left = previousNames.filter(name => !currentNames.includes(name));
                    
                    // Add events for player changes
                    joined.forEach(player => {
                        this.addEvent('info', `Player joined: ${player}`, {
                            players: data.players?.online || 0,
                            status: 'online',
                            player: player,
                            action: 'player_join',
                            timestamp: new Date().toISOString()
                        });
                    });
                    
                    left.forEach(player => {
                        this.addEvent('info', `Player left: ${player}`, {
                            players: data.players?.online || 0,
                            status: 'online',
                            player: player,
                            action: 'player_leave',
                            timestamp: new Date().toISOString()
                        });
                    });
                }

                // Detect server lag
                if (data.online && data.round_trip_latency_ms > 100) {
                    this.addEvent('warning', `High latency detected: ${data.round_trip_latency_ms}ms`, {
                        players: data.players?.online || 0,
                        status: 'online',
                        ping: data.round_trip_latency_ms,
                        action: 'server_lag',
                        threshold: 100
                    });
                }
            }

            handleServerError(error, manualRefresh) {
                this.updateStatus('offline', 'Server Offline');
                
                // Check if this is a new offline event
                if (this.previousStatus !== 'offline') {
                    this.addEvent('critical', 'Server connection failed', {
                        players: 0,
                        status: 'offline',
                        error: error.message,
                        action: 'server_down'
                    });
                    
                    // Show critical alert
                    const criticalAlert = document.getElementById('critical-alert');
                    criticalAlert.classList.remove('hidden');
                    criticalAlert.querySelector('.alert-message').textContent = 
                        `Connection failed: ${error.message}. Our team has been notified.`;
                }
                
                // Reset display data
                this.resetDisplayData();
                
                if (manualRefresh) {
                    this.showNotification('Error', 'Failed to fetch server status', 'error');
                }
            }

            // UI Updates
            updateStatus(status, text) {
                const statusDot = document.getElementById('status-dot');
                const statusText = document.getElementById('status-text');
                
                statusDot.className = 'status-dot ' + status;
                statusText.textContent = text;
                
                // Update last updated time
                const now = new Date();
                document.getElementById('last-updated').textContent = 
                    `Last updated: ${now.toLocaleTimeString()}`;
            }

            updateConnectionQuality(ping) {
                const qualityElement = document.getElementById('connection-quality');
                
                if (!ping || ping <= 0) {
                    qualityElement.className = 'connection-quality excellent';
                    qualityElement.innerHTML = '<i class="fas fa-wifi"></i> Excellent';
                    return;
                }
                
                if (ping < 50) {
                    qualityElement.className = 'connection-quality excellent';
                    qualityElement.innerHTML = '<i class="fas fa-wifi"></i> Excellent';
                } else if (ping < 100) {
                    qualityElement.className = 'connection-quality good';
                    qualityElement.innerHTML = '<i class="fas fa-wifi"></i> Good';
                } else if (ping < 200) {
                    qualityElement.className = 'connection-quality poor';
                    qualityElement.innerHTML = '<i class="fas fa-wifi"></i> Poor';
                } else {
                    qualityElement.className = 'connection-quality bad';
                    qualityElement.innerHTML = '<i class="fas fa-wifi"></i> Bad';
                }
            }

            updateServerDisplay(data) {
                if (data.online) {
                    this.updateStatus('online', 'Server Online');
                    
                    // Update basic info
                    document.getElementById('player-count').textContent = 
                        `${data.players.online}/${data.players.max}`;
                    document.getElementById('player-count-text').textContent = 
                        `${data.players.online} players online`;
                    document.getElementById('ping-value').textContent = 
                        data.round_trip_latency_ms ? `${Math.round(data.round_trip_latency_ms)} ms` : '20 ms';
                    document.getElementById('version').textContent = data.version?.name || '-';
                    document.getElementById('protocol').textContent = 
                        data.version?.protocol || '-';
                    document.getElementById('motd').textContent = 
                        data.motd?.clean || '-';
                    document.getElementById('server-address').textContent = 
                        `${data.host}:${data.port}`;
                    document.getElementById('server-software').textContent = 'PocketMine-MP';
                    
                    // Update last checked
                    document.getElementById('last-checked').textContent = 
                        new Date().toLocaleString();
                    
                    // Update player list
                    this.updatePlayerList(data.players.list);
                    
                    // Update favicon if available
                    if (data.icon) {
                        document.getElementById('server-favicon').src = data.icon;
                        document.getElementById('server-favicon').style.display = 'block';
                    } else {
                        document.getElementById('server-favicon').style.display = 'none';
                    }
                    
                } else {
                    this.updateStatus('offline', 'Server Offline');
                    this.resetDisplayData();
                }
            }

            updatePlayerList(players) {
                const playerList = document.getElementById('player-list');
                
                if (players && players.length > 0) {
                    playerList.innerHTML = '';
                    
                    players.forEach((player, index) => {
                        const playerItem = document.createElement('div');
                        playerItem.className = 'player-item';
                        
                        // Get random Minecraft icon for player
                        const iconIndex = index % this.minecraftIcons.length;
                        const icon = this.minecraftIcons[iconIndex];
                        
                        playerItem.innerHTML = `
                            <div class="player-avatar minecraft-avatar">
                                <i class="${icon.icon} avatar-icon ${icon.class}"></i>
                            </div>
                            <div class="player-name">${player.name_clean || player.name || player}</div>
                            <div class="player-ping">
                                <i class="fas fa-signal"></i> ${Math.floor(Math.random() * 50) + 20}ms
                            </div>
                        `;
                        
                        playerList.appendChild(playerItem);
                    });
                } else {
                    playerList.innerHTML = '<div class="no-players">No players online</div>';
                }
            }

            resetDisplayData() {
                document.getElementById('player-count').textContent = '-/-';
                document.getElementById('player-count-text').textContent = '0 players online';
                document.getElementById('ping-value').textContent = '- ms';
                document.getElementById('version').textContent = '-';
                document.getElementById('protocol').textContent = '-';
                document.getElementById('motd').textContent = '-';
                document.getElementById('server-address').textContent = '-';
                document.getElementById('server-software').textContent = '-';
                document.getElementById('last-checked').textContent = '-';
                document.getElementById('server-favicon').style.display = 'none';
                
                // Reset player list
                document.getElementById('player-list').innerHTML = '<div class="no-players">No players online</div>';
            }

            // History and Chart
            initChart() {
                const ctx = document.getElementById('historyChart').getContext('2d');
                this.historyChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'Online Players',
                            data: [],
                            borderColor: '#6c5ce7',
                            backgroundColor: 'rgba(108, 92, 231, 0.1)',
                            borderWidth: 2,
                            fill: true,
                            tension: 0.4,
                            pointBackgroundColor: '#6c5ce7',
                            pointBorderColor: '#ffffff',
                            pointBorderWidth: 2,
                            pointRadius: 3
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: '#b0b0b0'
                                }
                            },
                            x: {
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: '#b0b0b0',
                                    maxTicksLimit: 8
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                labels: {
                                    color: '#eaeaea'
                                }
                            },
                            tooltip: {
                                backgroundColor: 'rgba(30, 30, 45, 0.9)',
                                titleColor: '#eaeaea',
                                bodyColor: '#eaeaea',
                                borderColor: '#6c5ce7',
                                borderWidth: 1
                            }
                        }
                    }
                });
            }

            updateChart(players) {
                const now = new Date();
                const timeLabel = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                
                // Add new data
                this.serverHistory.playerData.push({
                    time: timeLabel,
                    players: players
                });
                
                // Limit data points
                if (this.serverHistory.playerData.length > this.serverHistory.maxDataPoints) {
                    this.serverHistory.playerData.shift();
                }
                
                // Update chart
                this.historyChart.data.labels = this.serverHistory.playerData.map(item => item.time);
                this.historyChart.data.datasets[0].data = this.serverHistory.playerData.map(item => item.players);
                this.historyChart.update();
                
                // Save to localStorage
                this.saveHistory();
            }

            updateUptimeStats(isOnline) {
                // Save uptime data
                const now = Date.now();
                this.serverHistory.uptimeData.push({
                    timestamp: now,
                    online: isOnline
                });
                
                // Limit uptime data
                if (this.serverHistory.uptimeData.length > this.serverHistory.maxDataPoints * 2) {
                    this.serverHistory.uptimeData.shift();
                }
                
                // Calculate uptime percentages
                const oneDayAgo = now - (24 * 60 * 60 * 1000);
                const oneWeekAgo = now - (7 * 24 * 60 * 60 * 1000);
                const oneMonthAgo = now - (30 * 24 * 60 * 60 * 1000);
                
                const dailyUptime = this.calculateUptimePercentage(oneDayAgo);
                const weeklyUptime = this.calculateUptimePercentage(oneWeekAgo);
                const monthlyUptime = this.calculateUptimePercentage(oneMonthAgo);
                const totalUptime = this.calculateUptimePercentage(0);
                
                // Update display
                document.getElementById('daily-uptime').textContent = `${dailyUptime}%`;
                document.getElementById('weekly-uptime').textContent = `${weeklyUptime}%`;
                document.getElementById('monthly-uptime').textContent = `${monthlyUptime}%`;
                document.getElementById('total-uptime').textContent = `${totalUptime}%`;
            }

            calculateUptimePercentage(sinceTimestamp) {
                if (this.serverHistory.uptimeData.length === 0) return '0';
                
                const filteredData = this.serverHistory.uptimeData.filter(entry => 
                    sinceTimestamp === 0 || entry.timestamp >= sinceTimestamp
                );
                
                if (filteredData.length === 0) return '0';
                
                const onlineCount = filteredData.filter(entry => entry.online).length;
                const percentage = (onlineCount / filteredData.length) * 100;
                
                return percentage.toFixed(1);
            }

            // Data Persistence
            async loadHistory() {
                const saved = localStorage.getItem('serverMonitorHistory');
                if (saved) {
                    const parsed = JSON.parse(saved);
                    this.serverHistory.playerData = parsed.playerData || [];
                    this.serverHistory.uptimeData = parsed.uptimeData || [];
                    this.serverHistory.events = parsed.events || [];
                    
                    // Update chart with saved data
                    if (this.historyChart && this.serverHistory.playerData.length > 0) {
                        this.historyChart.data.labels = this.serverHistory.playerData.map(item => item.time);
                        this.historyChart.data.datasets[0].data = this.serverHistory.playerData.map(item => item.players);
                        this.historyChart.update();
                    }
                    
                    // Display saved events
                    if (this.serverHistory.events.length > 0) {
                        const eventsList = document.getElementById('events-list');
                        eventsList.innerHTML = '';
                        this.serverHistory.events.slice().reverse().forEach(event => {
                            this.displayEvent(event);
                        });
                    }
                }
            }

            saveHistory() {
                localStorage.setItem('serverMonitorHistory', JSON.stringify(this.serverHistory));
            }

            // Auto Refresh
            startAutoRefresh() {
                if (this.autoRefreshInterval) {
                    clearInterval(this.autoRefreshInterval);
                }
                
                this.autoRefreshInterval = setInterval(() => {
                    this.loadServerStatus();
                }, this.settings.refreshInterval * 1000);
            }

            // Particles Background
            initParticles() {
                const container = document.getElementById('particles-container');
                const particleCount = 30;
                
                for (let i = 0; i < particleCount; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    
                    // Random size and position
                    const size = Math.random() * 4 + 2;
                    particle.style.width = `${size}px`;
                    particle.style.height = `${size}px`;
                    particle.style.left = `${Math.random() * 100}%`;
                    particle.style.top = `${Math.random() * 100}%`;
                    
                    // Random color
                    const colors = ['var(--primary-light)', 'var(--secondary)', 'var(--warning)'];
                    particle.style.background = colors[Math.floor(Math.random() * colors.length)];
                    
                    // Random animation delay
                    particle.style.animationDelay = `${Math.random() * 15}s`;
                    
                    container.appendChild(particle);
                }
            }

            // Event Listeners
            initEventListeners() {
                // Refresh button
                document.getElementById('refresh-btn').addEventListener('click', () => {
                    this.loadServerStatus(true);
                });

                // Tabs
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        
                        document.querySelectorAll('.tab-content').forEach(content => {
                            content.classList.remove('active');
                        });
                        
                        const tabId = tab.getAttribute('data-tab');
                        document.getElementById(`${tabId}-tab`).classList.add('active');
                    });
                });

                // Events controls
                document.getElementById('export-events').addEventListener('click', () => {
                    this.exportEvents();
                });

                document.getElementById('clear-events').addEventListener('click', () => {
                    if (confirm('Are you sure you want to clear all events?')) {
                        this.clearEvents();
                    }
                });

                // Discord test button
                document.getElementById('test-discord').addEventListener('click', () => {
                    this.testDiscord();
                });

                // Discord toggle
                document.getElementById('discord-toggle').addEventListener('change', (e) => {
                    this.settings.discordEnabled = e.target.checked;
                    this.saveSettings();
                    this.updateDiscordStatus();
                });

                // Discord notification checkboxes
                document.getElementById('notify-server-down').addEventListener('change', (e) => {
                    this.settings.discordEvents.serverDown = e.target.checked;
                    this.saveSettings();
                });

                document.getElementById('notify-server-up').addEventListener('change', (e) => {
                    this.settings.discordEvents.serverUp = e.target.checked;
                    this.saveSettings();
                });

                document.getElementById('notify-player-join').addEventListener('change', (e) => {
                    this.settings.discordEvents.playerJoin = e.target.checked;
                    this.saveSettings();
                });

                document.getElementById('notify-server-lag').addEventListener('change', (e) => {
                    this.settings.discordEvents.serverLag = e.target.checked;
                    this.saveSettings();
                });

                // Settings panel
                document.getElementById('settings-btn').addEventListener('click', () => {
                    document.getElementById('settings-panel').classList.add('active');
                    document.getElementById('settings-overlay').classList.add('active');
                });

                document.getElementById('settings-close').addEventListener('click', () => {
                    document.getElementById('settings-panel').classList.remove('active');
                    document.getElementById('settings-overlay').classList.remove('active');
                });

                document.getElementById('settings-overlay').addEventListener('click', () => {
                    document.getElementById('settings-panel').classList.remove('active');
                    document.getElementById('settings-overlay').classList.remove('active');
                });

                document.getElementById('settings-save').addEventListener('click', () => {
                    // Save settings from UI
                    this.settings.notifications = document.getElementById('notifications-enabled').checked;
                    this.settings.notificationSound = document.getElementById('notification-sound').value;
                    this.settings.refreshInterval = parseInt(document.getElementById('refresh-interval').value);
                    this.settings.avatarStyle = document.getElementById('avatar-style').value;
                    
                    this.saveSettings();
                    
                    // Close settings panel
                    document.getElementById('settings-panel').classList.remove('active');
                    document.getElementById('settings-overlay').classList.remove('active');
                    
                    this.showNotification('Settings Saved', 'Your settings have been saved successfully', 'success');
                });
            }
        }

        // Initialize the application
        let monitor;
        
        document.addEventListener('DOMContentLoaded', async function() {
            monitor = new ServerMonitor();
            await monitor.initialize();
            
            // Make monitor available globally
            window.monitor = monitor;
        });
    </script>
</body>
</html>
